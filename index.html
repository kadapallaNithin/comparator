<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta content="IE=Edge" http-equiv="X-UA-Compatible">
  <meta name="description" content="Web Options Order Comparator By Kadapalla Nithin Kumar">
  <title>Web Options Order Comparator By Kadapalla Nithin Kumar</title>

  <!-- iOS meta tags & icons -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="apple-mobile-web-app-title" content="Compare Web Options">
  <style>
    /* tr{
        border: 6px solid black;
        border-collapse: separate;
        background: gray;
    } */
     /* td:nth-child(4){
        background-color: #0004;
     } */
      #table2 td{
        background-color: #0003;
      } 
    textarea{
      border-radius: 5px;
      margin: 2px;
    }
    button{
      background: #3872c6;
      color: whitesmoke;
      border: none;
      border-radius: 5px;
      padding: 5px;
      margin: 2px;
    }
  </style>
</head>
<body>
    <h1>Web Options Order Comparator</h1>
    <textarea name="" id="web_options" rows="10" cols="20" onchange="fillTable()">
JNTH,CSM
JNTH,CSE</textarea>
    <textarea name="" id="clg_options" rows="10" cols="20">CBIT,ECE
JNTH,CSE</textarea>
    <button onclick='fillTable()'>Compare</button>
    <table id="table">
    </table>
    <h3>Missing</h3>
    <table id="table2">
    </table>
  <script>
    function fillTable(){
        var optionsText = document.getElementById('web_options').value;
        var clg_options = document.getElementById('clg_options').value.split('\n');
        var rows = optionsText.split('\n')
        var table = document.getElementById('table');
        var table2 = document.getElementById('table2');
        table.innerHTML = '';
        table2.innerHTML = '';
        console.log('filling table');
        var clg = 'Unknown';
        var webOpt = {};
        for(var ci in clg_options){
            var row = clg_options[ci];
            var cols;
            if(row.indexOf('\t') != -1){
                cols = row.split('\t');
            }else{
                cols = row.split(',');
            }
            if(cols.length == 2){
                if(!cols[0]){
                    cols[0] = clg;
                }else{
                    clg = cols[0];
                }
                var clg = cols[0];
                var brn = cols[1];
                if(webOpt[clg] == undefined){
                    webOpt[clg] = {};
                }
                if(webOpt[clg][brn] == undefined){
                    webOpt[clg][brn] = ['-','-'];
                }
                webOpt[clg][brn][0] = parseInt(ci)+1;
            }else{
                console.log(ci,'missed ci',row);
            }
        }

        for(var ri in rows){
            var row = rows[ri];
            var cols;
            if(row.indexOf('\t') != -1){
                cols = row.split('\t');
            }else{
                cols = row.split(',');
            }
            if(cols.length == 2){
                if(!cols[0]){
                    cols[0] = clg;
                }else{
                    clg = cols[0];
                }
                var brn = cols[1];
                if(webOpt[clg] == undefined){
                    webOpt[clg] = {};
                }
                if(webOpt[clg][brn] == undefined){
                    webOpt[clg][brn] = ['-','-'];
                }
                webOpt[clg][brn][1] = parseInt(ri)+1;
                var pos = webOpt[clg][brn][0];
                var pos1 = webOpt[clg][brn][1];
                var pdiff = (pos-pos1);
                // pdiff = Math.round(pdiff*100);
                table.innerHTML += '<tr><td>'+pos1+'</td><td>'+clg+'</td><td>'+brn+'</td><td>'+pos+'</td><td>'+pdiff+'</td></tr>';
            }else{
                console.log(ri,'missed',row);
            }
        }

        for(clg in webOpt){
            var clgInfo = webOpt[clg];
            for(var brn in clgInfo){
                var pos = clgInfo[brn];
                if(pos[1] == '-' ){//pos[0] == '-' || 
                    table2.innerHTML += '<tr><td>'+pos[1]+'</td><td>'+clg+'</td><td>'+brn+'</td><td>'+pos[0]+'</td></tr>';
                }
                console.log(clg,brn,clgInfo[brn]);
            }
        }
    }
    fillTable()
  </script>
</body>
</html>
